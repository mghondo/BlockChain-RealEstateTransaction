WARNING: You are currently using Node.js v18.20.8, which is not supported by Hardhat. This can lead to unexpected behavior. See https://hardhat.org/nodejs-versions


[dotenv@17.2.1] injecting env (2) from .env -- tip: ⚙️  suppress all logs with { quiet: true }


  RealEstate
    Deployment
Deploying MockUSDC...
MockUSDC deployed to: 0x5FbDB2315678afecb367f032d93F642f64180aa3
Deploying MockAUSDC...
MockAUSDC deployed to: 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
Deploying MockAavePool...
MockAavePool deployed to: 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
USDC minted to buyer and lender
Deploying RealEstate...
RealEstate deployed to: 0x5FC8d32690cc91D4c39d9d3abcBD16989F875707
Deploying EscrowWithStableAndYield...
EscrowWithStableAndYield deployed to: 0x0165878A594ca255338adfa4d48449f69242Eb8F
NFT minted and approved
      ✔ deploys RealEstate contract successfully
Deploying MockUSDC...
MockUSDC deployed to: 0x8A791620dd6260079BF849Dc5567aDC3F2FdC318
Deploying MockAUSDC...
MockAUSDC deployed to: 0x610178dA211FEF7D417bC0e6FeD39F05609AD788
Deploying MockAavePool...
MockAavePool deployed to: 0xB7f8BC63BbcaD18155201308C8f3540b07f84F5e
USDC minted to buyer and lender
Deploying RealEstate...
RealEstate deployed to: 0x9A676e781A523b5d0C0e43731313A708CB607508
Deploying EscrowWithStableAndYield...
EscrowWithStableAndYield deployed to: 0x0B306BF915C4d645ff596e518fAf3F9669b97016
NFT minted and approved
      ✔ deploys Escrow contract successfully
Deploying MockUSDC...
MockUSDC deployed to: 0x68B1D87F95878fE05B998F19b66F4baba5De1aed
Deploying MockAUSDC...
MockAUSDC deployed to: 0x3Aa5ebB10DC797CAC828524e59A333d0A371443c
Deploying MockAavePool...
MockAavePool deployed to: 0xc6e7DF5E7b4f2A278906862b61205850344D4e7d
USDC minted to buyer and lender
Deploying RealEstate...
RealEstate deployed to: 0x322813Fd9A801c5507c9de605d63CEA4f2CE6c44
Deploying EscrowWithStableAndYield...
EscrowWithStableAndYield deployed to: 0xa85233C63b9Ee964Add6F2cffe00Fd84eb32338f
NFT minted and approved
      ✔ sends an NFT to the seller/deployer
Deploying MockUSDC...
MockUSDC deployed to: 0x09635F643e140090A9A8Dcd712eD6285858ceBef
Deploying MockAUSDC...
MockAUSDC deployed to: 0xc5a5C42992dECbae36851359345FE25997F5C42d
Deploying MockAavePool...
MockAavePool deployed to: 0x67d269191c92Caf3cD7723F116c85e6E9bf55933
USDC minted to buyer and lender
Deploying RealEstate...
RealEstate deployed to: 0x84eA74d481Ee0A5332c457a4d796187F6Ba67fEB
Deploying EscrowWithStableAndYield...
EscrowWithStableAndYield deployed to: 0x9E545E3C0baAB3E08CdfD552C960A1050f373042
NFT minted and approved
      ✔ initializes Escrow contract in Created phase
    Selling real estate
Deploying MockUSDC...
MockUSDC deployed to: 0x851356ae760d987E095750cCeb3bC6014560891C
Deploying MockAUSDC...
MockAUSDC deployed to: 0xf5059a5D33d5853360D16C683c16e67980206f36
Deploying MockAavePool...
MockAavePool deployed to: 0x95401dc811bb5740090279Ba06cfA8fcF6113778
USDC minted to buyer and lender
Deploying RealEstate...
RealEstate deployed to: 0x4826533B4897376654Bb4d4AD88B7faFD0C98528
Deploying EscrowWithStableAndYield...
EscrowWithStableAndYield deployed to: 0x99bbA657f2BbC93c02D617f8bA121cB8Fc104Acf
NFT minted and approved
Starting successful transaction test...
Buyer approved USDC
Buyer deposited earnest money
      1) executes a successful transaction
Deploying MockUSDC...
MockUSDC deployed to: 0x9d4454B023096f34B160D6B654540c56A1F81688
Deploying MockAUSDC...
MockAUSDC deployed to: 0x5eb3Bc0a489C5A8288765d2336659EbCA68FCd00
Deploying MockAavePool...
MockAavePool deployed to: 0x36C02dA8a0983159322a80FFE9F24b1acfF8B570
USDC minted to buyer and lender
Deploying RealEstate...
RealEstate deployed to: 0x1291Be112d480055DaFd8a610b7d1e203891C274
Deploying EscrowWithStableAndYield...
EscrowWithStableAndYield deployed to: 0x5f3f1dBD7B74C6B46e8c44f98792A1dAf8d69154
NFT minted and approved
Starting cancellation if inspection fails test...
Buyer deposited earnest money
Inspector set inspection to failed
      2) cancels transaction if inspection fails
Deploying MockUSDC...
MockUSDC deployed to: 0x82e01223d51Eb87e16A03E24687EDF0F294da6f1
Deploying MockAUSDC...
MockAUSDC deployed to: 0x2bdCC0de6bE1f7D2ee689a0342D76F52E8EFABa3
Deploying MockAavePool...
MockAavePool deployed to: 0x7969c5eD335650692Bc04293B07F5BF2e7A673C0
USDC minted to buyer and lender
Deploying RealEstate...
RealEstate deployed to: 0xFD471836031dc5108809D173A067e8486B9047A3
Deploying EscrowWithStableAndYield...
EscrowWithStableAndYield deployed to: 0xcbEAF3BDe82155F56486Fb5a1072cb8baAf547cc
NFT minted and approved
Starting cancellation after inspection passes test...
Buyer deposited earnest money
Inspector set inspection to passed
      3) cancels transaction after inspection passes


  4 passing (1s)
  3 failing

  1) RealEstate
       Selling real estate
         executes a successful transaction:

      AssertionError: expected 75638698972 to equal 20000000000. The numerical values of the given "ethers.BigNumber" and "ethers.BigNumber" inputs were compared, and they differed.
      + expected - actual

      -75638698972
      +20000000000
      
      at Context.<anonymous> (test/RealEstate.js:115:32)

  2) RealEstate
       Selling real estate
         cancels transaction if inspection fails:
     Error: VM Exception while processing transaction: reverted with reason string 'ERC20: burn amount exceeds balance'
    at MockAUSDC._burn (@openzeppelin/contracts/token/ERC20/ERC20.sol:283)
    at MockAUSDC.burn (contracts/MockAUSDC.sol:22)
    at MockAavePool.withdraw (contracts/MockAavePool.sol:27)
    at EscrowWithStableAndYield.cancelSale (contracts/EscrowWithStableAndYield.sol:159)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:359:41)
    at EthersProviderWrapper.send (node_modules/@nomiclabs/hardhat-ethers/src/internal/ethers-provider-wrapper.ts:13:20)
  

  3) RealEstate
       Selling real estate
         cancels transaction after inspection passes:
     Error: VM Exception while processing transaction: reverted with reason string 'ERC20: burn amount exceeds balance'
    at MockAUSDC._burn (@openzeppelin/contracts/token/ERC20/ERC20.sol:283)
    at MockAUSDC.burn (contracts/MockAUSDC.sol:22)
    at MockAavePool.withdraw (contracts/MockAavePool.sol:27)
    at EscrowWithStableAndYield.cancelSale (contracts/EscrowWithStableAndYield.sol:159)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:359:41)
    at EthersProviderWrapper.send (node_modules/@nomiclabs/hardhat-ethers/src/internal/ethers-provider-wrapper.ts:13:20)
  



